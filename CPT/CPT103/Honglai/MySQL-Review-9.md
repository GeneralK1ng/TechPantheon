这一章开始就是我们所谓的八股文了，但是考试又要考，你拿他有什么办法？

# 数据库设计

设计数据库，这是开发过程中非常关键的一个步骤，它涉及到如何组织和存储数据，以便系统可以有效地检索和管理信息。

1. **需求分析：** 在设计数据库之前，首先需要了解系统的需求。这包括确定系统将要存储和处理的数据类型，以及用户希望从数据库中检索的信息。
2. **概念设计：** 在这个阶段，你需要识别和定义系统中的实体，这些实体可以是人、地点、事件等。还需要确定这些实体之间的关系。使用实体-关系图（ER图）等工具进行可视化表示。
3. **逻辑设计：** 将概念设计转换为逻辑设计。在这个阶段，你需要确定如何将实体和关系转换为数据库表。每个实体应该成为一个表，每个属性应该成为表中的列。确定主键、外键等约束。
4. **规范化：** 数据库规范化是一个重要的步骤，它有助于减少数据冗余并提高数据库的性能。规范化的目标是将数据组织成符合某种标准形式的表，以便降低冗余并提高数据存储效率。

接下来就是建表，外键，约束这些东西了，这一节应该目的在于抽象地教你如何进行数据库建表前的准备设计工作，让你有的放矢。

## 实体-关系建模

实体-关系建模（Entity-Relationship Modeling，简称ER建模）是一种用于可视化和描述数据库中数据结构的方法。ER建模是数据库设计的早期阶段，它通过图形化表示来表达实体、属性和实体之间的关系。这种建模方法通常使用实体-关系图（ER图）。

以下是ER建模中的关键概念：

1. **实体（Entity）：** 实体是系统中可以区分和识别的一个独立的事物，它可以是一个对象、一个人、一个地点或一个概念。在ER图中，实体通常用圆角框表示。
2. **属性（Attribute）：** 属性是描述实体特征的信息，它为实体提供更多的详细信息。例如，一个"学生"实体可以有属性如姓名、学号、出生日期等。属性通常用椭圆形表示。
3. **关系（Relationship）：** 关系表示实体之间的联系。在ER图中，关系通常用菱形表示，链接的末端显示基数。关系可以是一对一、一对多或多对多的。例如，一个"学生"实体和一个"课程"实体之间可以有关系，表示学生和课程之间的选修关系。

	## 基数比

Cardinality Ratios（基数比率）是在实体-关系模型（ER模型）中用于描述实体之间关系的一个重要概念。它指的是一个关系中参与的实体之间的数量关系。Cardinality Ratios有三种主要类型：一对一（One-to-One）、一对多（One-to-Many）、多对多（Many-to-Many）。

1. **一对一（One-to-One）：**
   - 在一对一关系中，一个实体的一个实例只能关联到另一个实体的一个实例，反之亦然。
   - 例如，一个人可能只有一个身份证号码，而一个身份证号码也只能对应一个人。
2. **一对多（One-to-Many）：**
   - 在一对多关系中，一个实体的一个实例可以关联到另一个实体的多个实例，但反过来不成立。
   - 例如，一个作者可以写多本书，但一本书只能由一个作者编写。
3. **多对多（Many-to-Many）：**
   - 在多对多关系中，一个实体的多个实例可以关联到另一个实体的多个实例，这是一种比较灵活的关系。
   - 例如，学生可以选择多门课程，而一门课程也可以被多个学生选修。

## 设计ER模型

ER建模的步骤如下：

1. **识别实体：** 从需求分析中确定系统中的实体，这可以是物理实体或概念实体。
2. **识别属性：** 为每个实体确定相关的属性，这些属性描述了实体的特征。
3. **确定关系：** 确定实体之间的关系，表示实体之间的联系。
4. **确定主键：** 为每个实体确定主键，确保每个实体都有一个唯一标识。
5. **确定外键：** 在需要的情况下，确定外键以建立实体之间的关联。
6. **绘制ER图：** 使用ER图工具（纸和笔、绘图软件等）绘制实体、属性、关系之间的图形表示。

 按照学校的例子：

一所大学由若干系组成。每个系提供若干门课程。每门课程由若干模块组成。学生注册某门课程，并在完成该课程时学习模块。每个模块由相应系的一名讲师教授（几名讲师在同一系工作），每个讲师辅导一组学生。一名讲师可以教授多个模块，但只能在一个系工作。

### 1. 实体识别：

- 学校（University）
- 部门（Department）
- 课程（Course）
- 模块（Module）
- 学生（Student）
- 讲师（Lecturer）

### 2. 属性定义：

#### 学校（University）：

- 属性：`UniversityID `(Primary Key), `Name`, `Location`

#### 部门（Department）：

- 属性：`DepartmentID` (Primary Key), `Name`

#### 课程（Course）：

- 属性：`CourseID` (Primary Key), `Name`

#### 模块（Module）：

- 属性：`ModuleID` (Primary Key), `Name`

#### 学生（Student）：

- 属性：`StudentID` (Primary Key), `Name`, `Address`, `DateOfBirth`

#### 讲师（Lecturer）：

- 属性：`LecturerID` (Primary Key), `Name`, `Address`, `DateOfBirth`

### 3. 关系识别：

- 学校（University）与部门（Department）之间存在一对多关系，一个学校可以有多个部门，但一个部门只属于一个学校。
- 部门（Department）与课程（Course）之间存在一对多关系，一个部门可以提供多门课程，但一门课程只属于一个部门。
- 课程（Course）与模块（Module）之间存在一对多关系，一门课程可以包括多个模块，但一个模块只属于一门课程。
- 学生（Student）与课程（Course）之间存在多对多关系，一个学生可以注册多门课程，一门课程也可以有多名学生。
- 模块（Module）与讲师（Lecturer）之间存在一对多关系，一个模块由一个讲师教授，但一个讲师可以教授多个模块。
- 讲师（Lecturer）与部门（Department）之间存在一对多关系，一个讲师属于一个部门，但一个部门可以有多个讲师。

### 4. 主键和外键：

- 每个实体都有一个主键（Primary Key）用于唯一标识实体的每个实例。
- 外键（Foreign Key）用于建立实体之间的关系。例如，部门（Department）表中的`UniversityID`可以作为外键与学校（University）表中的`UniversityID`关联。





![](https://cdn.jsdelivr.net/gh/GeneralK1ng/My_Blog_IMG@main/img/erExample-1.png)

这个就是一个简单的ER图，以下是它的主键和外键关系。

![](https://cdn.jsdelivr.net/gh/GeneralK1ng/My_Blog_IMG@main/img/erExample-2.png)

这里图里面的一对多，多对多啊这些的只是为了方便呈现，其实按照学校的要求这里应该写两者之间的关系名称，然后用菱形方框框起来，而且属性必须用椭圆形分别连出来，但是我的画图工具并不支持，所以记住就行。





